@model LeaveManagementSystem.Models.Entities.LeaveType
@{
    Layout = "~/Views/Shared/_Layout.cshtml";
    ViewData["Title"] = Model.LeaveTypeId == 0 ? "Add New Leave Type" : "Edit Leave Type";
}

<div class="dashboard-container">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="section-card">
                <div class="text-center mb-4">
                    <h2>
                        <i class="fas fa-file-contract me-2"></i>
                        @(Model.LeaveTypeId == 0 ? "Add New Leave Type" : "Edit Leave Type")
                    </h2>
                </div>

                <form asp-action="ManageLeavePolicy" method="post">
                    @Html.AntiForgeryToken()

                    <input type="hidden" asp-for="LeaveTypeId" />

                    <div class="mb-3">
                        <label asp-for="Name" class="form-label">
                            <i class="fas fa-tag me-2"></i>Leave Type Name
                        </label>
                        <input asp-for="Name" class="form-control"
                               placeholder="e.g., Casual Leave, Sick Leave, Earned Leave"
                               required />
                        <span asp-validation-for="Name" class="text-danger"></span>
                    </div>

                    <div class="mb-4">
                        <label asp-for="MaxPerYear" class="form-label">
                            <i class="fas fa-calendar-alt me-2"></i>Maximum Days Per Year
                        </label>
                        <input asp-for="MaxPerYear" class="form-control"
                               type="number" min="1" max="365"
                               placeholder="e.g., 12"
                               required />
                        <span asp-validation-for="MaxPerYear" class="text-danger"></span>
                    </div>

                    @if (ViewData.ModelState.ErrorCount > 0)
                    {
                        <div class="alert alert-danger">
                            <h6><i class="fas fa-exclamation-triangle me-2"></i>Please fix the following errors:</h6>
                            <ul class="mb-0">
                                @foreach (var error in ViewData.ModelState.Values.SelectMany(v => v.Errors))
                                {
                                    <li>@error.ErrorMessage</li>
                                }
                            </ul>
                        </div>
                    }

                    <div class="d-grid gap-2 d-md-flex justify-content-md-end mt-4">
                        <a class="btn btn-secondary me-md-2" href="@Url.Action("LeavePolicies", "Dashboard")">
                            <i class="fas fa-times me-2"></i>Cancel
                        </a>
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save me-2"></i>
                            @(Model.LeaveTypeId == 0 ? "Create Leave Type" : "Update Leave Type")
                        </button>
                    </div>
                </form>
            </div>

           
        </div>
    </div>
</div>

<style>
    .dashboard-container {
        padding: 30px;
    }

    .section-card {
        background: var(--darker-surface);
        border-radius: 12px;
        padding: 30px;
        border: 1px solid var(--border-color);
    }

  

    .form-control {
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid var(--border-color);
        color: var(--text-light);
        padding: 12px 15px;
    }

        .form-control:focus {
            background: rgba(255, 255, 255, 0.08);
            border-color: var(--primary-accent);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2);
        }

    .form-label {
        font-weight: 600;
        color: var(--text-light);
        margin-bottom: 8px;
    }

    .form-text {
        color: var(--text-muted);
        font-size: 0.875rem;
        margin-top: 5px;
    }
</style>

@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
    <script>
        $(document).ready(function() {
            // Auto-focus on first input
            $('form input:first').focus();

            // Prevent form submission if there are validation errors
            $('form').on('submit', function(e) {
                if (!$(this).valid()) {
                    e.preventDefault();
                    // Scroll to first error
                    $('html, body').animate({
                        scrollTop: $('.field-validation-error:first').offset().top - 100
                    }, 500);
                }
            });
        });
    </script>
}